console.log("=== Enhanced Webflow Analyzer Starting ===");const originalWebflow=window.Webflow||{};console.log("Original Webflow object keys:",Object.keys(originalWebflow));console.log("Original Webflow object methods:",Object.getOwnPropertyNames(originalWebflow).filter((e=>typeof originalWebflow[e]==="function")));const usageData={functionCalls:{},propertyAccess:new Set,events:new Set,startTime:Date.now(),pageLoadTime:null};function getStackTrace(){try{throw new Error}catch(e){return e.stack.split("\n").slice(2).map((e=>e.trim())).filter((e=>!e.includes("analyze-webflow.js")))}}window.Webflow=new Proxy(originalWebflow,{get(e,t){const a=Date.now();const o=a-usageData.startTime;console.log(`[${o}ms] Accessing Webflow.${t}`);usageData.propertyAccess.add(t);const n=e[t];if(typeof n==="function")return function(...e){const a=Date.now();const o=a-usageData.startTime;const s=getStackTrace();console.log(`[${o}ms] Calling Webflow.${t}()`,"\nArguments:",e.map((e=>typeof e)),"\nStack:",s[0]);if(!usageData.functionCalls[t])usageData.functionCalls[t]=[];usageData.functionCalls[t].push({timestamp:a,relativeTime:o,argTypes:e.map((e=>typeof e)),stack:s,pagePhase:document.readyState});return n.apply(this,e)};return n}});const originalAddEventListener=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,t,a){const o=Date.now();const n=o-usageData.startTime;const s=getStackTrace();console.log(`[${n}ms] Event listener added: ${e}`,"\nStack:",s[0]);usageData.events.add({type:e,timestamp:o,relativeTime:n,stack:s[0],target:this.tagName||this.toString()});return originalAddEventListener.call(this,e,t,a)};function printUsageReport(){const e=Date.now();const t=e-usageData.startTime;console.log("\n=== Detailed Webflow Usage Report ===\n");console.log(`Total time: ${t}ms`);console.log(`Page load time: ${usageData.pageLoadTime}ms`);console.log("\nAccessed Properties:");console.log([...usageData.propertyAccess]);console.log("\nFunction Calls by Timing:");Object.entries(usageData.functionCalls).forEach((([e,t])=>{console.log(`\n${e}:`);console.log(`  Total calls: ${t.length}`);console.log("  First call:",{time:t[0].relativeTime+"ms",phase:t[0].pagePhase,stack:t[0].stack[0]});if(t.length>1)console.log("  Last call:",{time:t[t.length-1].relativeTime+"ms",phase:t[t.length-1].pagePhase,stack:t[t.length-1].stack[0]})}));console.log("\nEvent Listeners:");const a={};usageData.events.forEach((e=>{if(!a[e.type])a[e.type]=[];a[e.type].push(e)}));Object.entries(a).forEach((([e,t])=>{console.log(`\n${e}:`);console.log(`  Count: ${t.length}`);console.log("  Targets:",[...new Set(t.map((e=>e.target)))])}));const o=Object.getOwnPropertyNames(originalWebflow).filter((e=>typeof originalWebflow[e]==="function"));const n=Object.keys(usageData.functionCalls);const s=o.filter((e=>!n.includes(e)));console.log("\nPotentially Unused Functions:");console.log(s);const l={summary:{totalTime:t,pageLoadTime:usageData.pageLoadTime,totalFunctionCalls:Object.values(usageData.functionCalls).reduce(((e,t)=>e+t.length),0),totalEventListeners:usageData.events.size,unusedFunctions:s},details:{functionCalls:usageData.functionCalls,propertyAccess:[...usageData.propertyAccess],events:[...usageData.events]}};console.log("\nExport data available as window.webflowUsageData");window.webflowUsageData=l}window.addEventListener("load",(()=>{usageData.pageLoadTime=Date.now()-usageData.startTime;printUsageReport()}));window.printWebflowUsage=printUsageReport;window.checkWebflowFunction=e=>{const t=usageData.functionCalls[e]||[];console.log(`\nDetailed usage for ${e}:`);console.log(`Total calls: ${t.length}`);if(t.length>0)t.forEach(((e,t)=>{console.log(`\nCall ${t+1}:`);console.log("Time:",e.relativeTime+"ms");console.log("Page phase:",e.pagePhase);console.log("Stack:",e.stack[0]);console.log("Argument types:",e.argTypes)}))};console.log("Enhanced Webflow Analyzer Ready");